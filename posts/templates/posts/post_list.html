<!-- templates/posts/post_list.html -->
{% extends 'base.html' %}

{% block content %}
  <h1>–í—Å–µ –ø–æ—Å—Ç—ã</h1>

  <a href="{% url 'post_create' %}" class="btn">‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</a>

  <div class="filters">
    <h3>–§–∏–ª—å—Ç—Ä—ã:</h3>
    <a href="?type=problem" class="filter-btn">–ü—Ä–æ–±–ª–µ–º—ã</a>
    <a href="?type=suggestion" class="filter-btn">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</a>
    <a href="?type=blog" class="filter-btn">–ë–ª–æ–≥</a>
    <a href="{% url 'post_list' %}" class="filter-btn">–í—Å–µ</a>
  </div>

  {% for post in posts %}
    <div class="post">
      <h2>{{ post.title }}</h2>
      <p class="post-meta">
        –ê–≤—Ç–æ—Ä: {{ post.author.username }} | –¢–∏–ø: {{ post.get_post_type_display }} |
        {{ post.created_at|date:'d.m.Y H:i' }}
        {% if post.category %}
          | –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ post.category.name }}
        {% endif %}
      </p>
      <p>{{ post.content|truncatewords:50 }}</p>

      <div class="post-actions">
        <a href="{% url 'post_detail' post.id %}" class="btn">–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ</a>
        <span class="likes">‚ù§Ô∏è {{ post.likes.count }} –ª–∞–π–∫–æ–≤</span>
        <span class="comments">üí¨ {{ post.comments.count }} –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</span>
      </div>
    </div>
  {% empty %}
    <div class="no-posts">
      <p>–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
    </div>
  {% endfor %}
{% endblock %}
